<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>My Profile - MRSYS</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='user_profile.css') }}">
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;700&display=swap" rel="stylesheet"/>
</head>
<body>
  <div class="dashboard-container">
    <aside class="sidebar">
      <div>
        <h2 class="logo">MRSYS</h2>
        <nav class="nav-menu">
          <a href="{{ url_for('views.userdashboard') }}">Home</a>
          <a href="#" class="active">My Profile</a>
          <a href="{{ url_for('views.membershipdetails') }}">Membership Details</a>
          <a href="{{ url_for('views.billingpayment') }}">Billing & Payment</a>
          <a href="{{ url_for('views.eventsparticipation') }}">My Events Participation</a>
          <a href="{{ url_for('views.committeeparticipation') }}">Committee Participation</a>
        </nav>
      </div>
      <div class="logout-section">
        <hr class="logout-divider" />
        <a href="{{ url_for('views.home') }}" class="logout-link" onclick="return confirm('Are you sure you want to log out?')">Log Out</a>
      </div>
    </aside>

    <main class="profile-content">
      <section class="profile-header">
        <h1>My Profile</h1>
        <p class="subtitle">View and update your information below:</p>
        <hr class="skyline-divider" />
      </section>

      <form class="profile-form" id="profileForm">
        <!-- Personal Information -->
        <fieldset>
          <legend>Personal Information</legend>

          <div class="form-group">
            <label for="full-name">Full Name</label>
            <input type="text" id="full-name" value="{{ fullname }}" disabled />
          </div>

          <div class="form-group">
            <label for="email">Email Address</label>
            <input type="email" id="email" value="{{ email }}" disabled />
          </div>

          <div class="form-group">
            <label for="phone">Contact Number</label>
            <input type="tel" id="phone" value="{{ phone }}" disabled />
          </div>

          <div class="form-group">
            <label for="address">Address</label>
            <textarea id="address" rows="3" disabled>{{ address }}</textarea>
          </div>
        </fieldset>

        <!-- Emergency Contact -->
        <fieldset>
          <legend>Emergency Contact</legend>
          <div class="form-group">
            <label for="emergency-contact">Contact Number</label>
            <input type="tel" id="emergency-contact" value="{{ emergency_contact }}" disabled />
          </div>
        </fieldset>

        <!-- Change Password -->
        <fieldset>
          <legend>Change Password</legend>
          <div class="form-group">
            <label for="current-password">Current Password</label>
            <input type="password" id="current-password" value="" disabled />
          </div>
          <div class="form-group">
            <label for="new-password">New Password</label>
            <input type="password" id="new-password" value="" disabled />
          </div>
          <div class="form-group">
            <label for="confirm-password">Confirm New Password</label>
            <input type="password" id="confirm-password" value="" disabled />
          </div>
        </fieldset>

        <div class="form-actions">
          <button type="button" id="editBtn">Edit</button>
          <button type="submit" id="saveBtn" style="display: none;">Save</button>
          <button type="button" id="cancelBtn" style="display: none;">Cancel</button>
        </div>
      </form>
    </main>
  </div>

  <script>
    const editBtn = document.getElementById('editBtn');
    const saveBtn = document.getElementById('saveBtn');
    const cancelBtn = document.getElementById('cancelBtn');
    const form = document.getElementById('profileForm');
    const inputs = form.querySelectorAll('input, textarea');
    inputs.forEach(input => input.disabled = true);

    editBtn.addEventListener('click', () => {
      inputs.forEach(input => input.disabled = false);
      editBtn.style.display = 'none';
      saveBtn.style.display = 'inline-block';
      cancelBtn.style.display = 'inline-block';
    });

    cancelBtn.addEventListener('click', () => {
      inputs.forEach(input => input.disabled = true);
      editBtn.style.display = 'inline-block';
      saveBtn.style.display = 'none';
      cancelBtn.style.display = 'none';
    });

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      inputs.forEach(input => input.disabled = true);
      editBtn.style.display = 'inline-block';
      saveBtn.style.display = 'none';
      cancelBtn.style.display = 'none';
      alert('Changes saved successfully!');
    });
  </script>
  <script src="{{ url_for('static', filename='user_profile.js') }}"></script>
</body>
</html>
